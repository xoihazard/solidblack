!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define(function(){return factory(root,root.document)}):"object"==typeof exports?module.exports=root.document?factory(root,root.document):function(w){return factory(w,w.document)}:root.SVG=factory(root,root.document)}("undefined"!=typeof window?window:this,function(window,document){function pathRegReplace(a,b,c,d){return c+d.replace(SVG.regex.dots," .")}function array_clone(arr){for(var clone=arr.slice(0),i=clone.length;i--;)Array.isArray(clone[i])&&(clone[i]=array_clone(clone[i]));return clone}function is(el,obj){return el instanceof obj}function matches(el,selector){return(el.matches||el.matchesSelector||el.msMatchesSelector||el.mozMatchesSelector||el.webkitMatchesSelector||el.oMatchesSelector).call(el,selector)}function camelCase(s){return s.toLowerCase().replace(/-(.)/g,function(m,g){return g.toUpperCase()})}function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}function fullHex(hex){return 4==hex.length?["#",hex.substring(1,2),hex.substring(1,2),hex.substring(2,3),hex.substring(2,3),hex.substring(3,4),hex.substring(3,4)].join(""):hex}function compToHex(comp){var hex=comp.toString(16);return 1==hex.length?"0"+hex:hex}function proportionalSize(element,width,height){if(null==width||null==height){var box=element.bbox();null==width?width=box.width/box.height*height:null==height&&(height=box.height/box.width*width)}return{width:width,height:height}}function deltaTransformPoint(matrix,x,y){return{x:x*matrix.a+y*matrix.c+0,y:x*matrix.b+y*matrix.d+0}}function arrayToMatrix(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function parseMatrix(matrix){return matrix instanceof SVG.Matrix||(matrix=new SVG.Matrix(matrix)),matrix}function ensureCentre(o,target){o.cx=null==o.cx?target.bbox().cx:o.cx,o.cy=null==o.cy?target.bbox().cy:o.cy}function arrayToString(a){for(var i=0,il=a.length,s="";i<il;i++)s+=a[i][0],null!=a[i][1]&&(s+=a[i][1],null!=a[i][2]&&(s+=" ",s+=a[i][2],null!=a[i][3]&&(s+=" ",s+=a[i][3],s+=" ",s+=a[i][4],null!=a[i][5]&&(s+=" ",s+=a[i][5],s+=" ",s+=a[i][6],null!=a[i][7]&&(s+=" ",s+=a[i][7])))));return s+" "}function assignNewId(node){for(var i=node.childNodes.length-1;i>=0;i--)node.childNodes[i]instanceof window.SVGElement&&assignNewId(node.childNodes[i]);return SVG.adopt(node).id(SVG.eid(node.nodeName))}function fullBox(b){return null==b.x&&(b.x=0,b.y=0,b.width=0,b.height=0),b.w=b.width,b.h=b.height,b.x2=b.x+b.width,b.y2=b.y+b.height,b.cx=b.x+b.width/2,b.cy=b.y+b.height/2,b}function idFromReference(url){var m=url.toString().match(SVG.regex.reference);if(m)return m[1]}var SVG=this.SVG=function(element){if(SVG.supported)return element=new SVG.Doc(element),SVG.parser.draw||SVG.prepare(),element};if(SVG.ns="http://www.w3.org/2000/svg",SVG.xmlns="http://www.w3.org/2000/xmlns/",SVG.xlink="http://www.w3.org/1999/xlink",SVG.svgjs="http://svgjs.com/svgjs",SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.did=1e3,SVG.eid=function(name){return"Svgjs"+capitalize(name)+SVG.did++},SVG.create=function(name){var element=document.createElementNS(this.ns,name);return element.setAttribute("id",this.eid(name)),element},SVG.extend=function(){var modules,methods,key,i;for(modules=[].slice.call(arguments),methods=modules.pop(),i=modules.length-1;i>=0;i--)if(modules[i])for(key in methods)modules[i].prototype[key]=methods[key];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.invent=function(config){var initializer="function"==typeof config.create?config.create:function(){this.constructor.call(this,SVG.create(config.create))};return config.inherit&&(initializer.prototype=new config.inherit),config.extend&&SVG.extend(initializer,config.extend),config.construct&&SVG.extend(config.parent||SVG.Container,config.construct),initializer},SVG.adopt=function(node){if(!node)return null;if(node.instance)return node.instance;var element;return element="svg"==node.nodeName?node.parentNode instanceof window.SVGElement?new SVG.Nested:new SVG.Doc:"linearGradient"==node.nodeName?new SVG.Gradient("linear"):"radialGradient"==node.nodeName?new SVG.Gradient("radial"):SVG[capitalize(node.nodeName)]?new(SVG[capitalize(node.nodeName)]):new SVG.Element(node),element.type=node.nodeName,element.node=node,node.instance=element,element instanceof SVG.Doc&&element.namespace().defs(),element.setData(JSON.parse(node.getAttribute("svgjs:data"))||{}),element},SVG.prepare=function(){var body=document.getElementsByTagName("body")[0],draw=(body?new SVG.Doc(body):SVG.adopt(document.documentElement).nested()).size(2,0);SVG.parser={body:body||document.documentElement,draw:draw.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:draw.polyline().node,path:draw.path().node,native:SVG.create("svg")}},SVG.parser={native:SVG.create("svg")},document.addEventListener("DOMContentLoaded",function(){SVG.parser.draw||SVG.prepare()},!1),SVG.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},SVG.utils={map:function(array,block){var i,il=array.length,result=[];for(i=0;i<il;i++)result.push(block(array[i]));return result},filter:function(array,block){var i,il=array.length,result=[];for(i=0;i<il;i++)block(array[i])&&result.push(array[i]);return result},radians:function(d){return d%360*Math.PI/180},degrees:function(r){return 180*r/Math.PI%360},filterSVGElements:function(nodes){return this.filter(nodes,function(el){return el instanceof window.SVGElement})}},SVG.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},SVG.Color=function(color){var match;this.r=0,this.g=0,this.b=0,color&&("string"==typeof color?SVG.regex.isRgb.test(color)?(match=SVG.regex.rgb.exec(color.replace(SVG.regex.whitespace,"")),this.r=parseInt(match[1]),this.g=parseInt(match[2]),this.b=parseInt(match[3])):SVG.regex.isHex.test(color)&&(match=SVG.regex.hex.exec(fullHex(color)),this.r=parseInt(match[1],16),this.g=parseInt(match[2],16),this.b=parseInt(match[3],16)):"object"==typeof color&&(this.r=color.r,this.g=color.g,this.b=color.b))},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+compToHex(this.r)+compToHex(this.g)+compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(color){return this.destination=new SVG.Color(color),this},at:function(pos){return this.destination?(pos=pos<0?0:pos>1?1:pos,new SVG.Color({r:~~(this.r+(this.destination.r-this.r)*pos),g:~~(this.g+(this.destination.g-this.g)*pos),b:~~(this.b+(this.destination.b-this.b)*pos)})):this}}),SVG.Color.test=function(color){return color+="",SVG.regex.isHex.test(color)||SVG.regex.isRgb.test(color)},SVG.Color.isRgb=function(color){return color&&"number"==typeof color.r&&"number"==typeof color.g&&"number"==typeof color.b},SVG.Color.isColor=function(color){return SVG.Color.isRgb(color)||SVG.Color.test(color)},SVG.Array=function(array,fallback){array=(array||[]).valueOf(),0==array.length&&fallback&&(array=fallback.valueOf()),this.value=this.parse(array)},SVG.extend(SVG.Array,{morph:function(array){if(this.destination=this.parse(array),this.value.length!=this.destination.length){for(var lastValue=this.value[this.value.length-1],lastDestination=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(lastDestination);for(;this.value.length<this.destination.length;)this.value.push(lastValue)}return this},settle:function(){for(var i=0,il=this.value.length,seen=[];i<il;i++)-1==seen.indexOf(this.value[i])&&seen.push(this.value[i]);return this.value=seen},at:function(pos){if(!this.destination)return this;for(var i=0,il=this.value.length,array=[];i<il;i++)array.push(this.value[i]+(this.destination[i]-this.value[i])*pos);return new SVG.Array(array)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(array){return array=array.valueOf(),Array.isArray(array)?array:this.split(array)},split:function(string){return string.trim().split(SVG.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var clone=new this.constructor;return clone.value=array_clone(this.value),clone}}),SVG.PointArray=function(array,fallback){SVG.Array.call(this,array,fallback||[[0,0]])},SVG.PointArray.prototype=new SVG.Array,SVG.PointArray.prototype.constructor=SVG.PointArray,SVG.extend(SVG.PointArray,{toString:function(){for(var i=0,il=this.value.length,array=[];i<il;i++)array.push(this.value[i].join(","));return array.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(pos){if(!this.destination)return this;for(var i=0,il=this.value.length,array=[];i<il;i++)array.push([this.value[i][0]+(this.destination[i][0]-this.value[i][0])*pos,this.value[i][1]+(this.destination[i][1]-this.value[i][1])*pos]);return new SVG.PointArray(array)},parse:function(array){var points=[];if(array=array.valueOf(),Array.isArray(array)){if(Array.isArray(array[0]))return array}else array=array.trim().split(SVG.regex.delimiter).map(parseFloat);array.length%2!=0&&array.pop();for(var i=0,len=array.length;i<len;i+=2)points.push([array[i],array[i+1]]);return points},move:function(x,y){var box=this.bbox();if(x-=box.x,y-=box.y,!isNaN(x)&&!isNaN(y))for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+x,this.value[i][1]+y];return this},size:function(width,height){var i,box=this.bbox();for(i=this.value.length-1;i>=0;i--)box.width&&(this.value[i][0]=(this.value[i][0]-box.x)*width/box.width+box.x),box.height&&(this.value[i][1]=(this.value[i][1]-box.y)*height/box.height+box.y);return this},bbox:function(){return SVG.parser.poly.setAttribute("points",this.toString()),SVG.parser.poly.getBBox()}});for(var pathHandlers={M:function(c,p,p0){return p.x=p0.x=c[0],p.y=p0.y=c[1],["M",p.x,p.y]},L:function(c,p){return p.x=c[0],p.y=c[1],["L",c[0],c[1]]},H:function(c,p){return p.x=c[0],["H",c[0]]},V:function(c,p){return p.y=c[0],["V",c[0]]},C:function(c,p){return p.x=c[4],p.y=c[5],["C",c[0],c[1],c[2],c[3],c[4],c[5]]},S:function(c,p){return p.x=c[2],p.y=c[3],["S",c[0],c[1],c[2],c[3]]},Q:function(c,p){return p.x=c[2],p.y=c[3],["Q",c[0],c[1],c[2],c[3]]},T:function(c,p){return p.x=c[0],p.y=c[1],["T",c[0],c[1]]},Z:function(c,p,p0){return p.x=p0.x,p.y=p0.y,["Z"]},A:function(c,p){return p.x=c[5],p.y=c[6],["A",c[0],c[1],c[2],c[3],c[4],c[5],c[6]]}},mlhvqtcsa="mlhvqtcsaz".split(""),i=0,il=mlhvqtcsa.length;i<il;++i)pathHandlers[mlhvqtcsa[i]]=function(i){return function(c,p,p0){if("H"==i)c[0]=c[0]+p.x;else if("V"==i)c[0]=c[0]+p.y;else if("A"==i)c[5]=c[5]+p.x,c[6]=c[6]+p.y;else for(var j=0,jl=c.length;j<jl;++j)c[j]=c[j]+(j%2?p.y:p.x);return pathHandlers[i](c,p,p0)}}(mlhvqtcsa[i].toUpperCase());SVG.PathArray=function(array,fallback){SVG.Array.call(this,array,fallback||[["M",0,0]])},SVG.PathArray.prototype=new SVG.Array,SVG.PathArray.prototype.constructor=SVG.PathArray,SVG.extend(SVG.PathArray,{toString:function(){return arrayToString(this.value)},move:function(x,y){var box=this.bbox();if(x-=box.x,y-=box.y,!isNaN(x)&&!isNaN(y))for(var l,i=this.value.length-1;i>=0;i--)l=this.value[i][0],"M"==l||"L"==l||"T"==l?(this.value[i][1]+=x,this.value[i][2]+=y):"H"==l?this.value[i][1]+=x:"V"==l?this.value[i][1]+=y:"C"==l||"S"==l||"Q"==l?(this.value[i][1]+=x,this.value[i][2]+=y,this.value[i][3]+=x,this.value[i][4]+=y,"C"==l&&(this.value[i][5]+=x,this.value[i][6]+=y)):"A"==l&&(this.value[i][6]+=x,this.value[i][7]+=y);return this},size:function(width,height){var i,l,box=this.bbox();for(i=this.value.length-1;i>=0;i--)l=this.value[i][0],"M"==l||"L"==l||"T"==l?(this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x,this.value[i][2]=(this.value[i][2]-box.y)*height/box.height+box.y):"H"==l?this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x:"V"==l?this.value[i][1]=(this.value[i][1]-box.y)*height/box.height+box.y:"C"==l||"S"==l||"Q"==l?(this.value[i][1]=(this.value[i][1]-box.x)*width/box.width+box.x,this.value[i][2]=(this.value[i][2]-box.y)*height/box.height+box.y,this.value[i][3]=(this.value[i][3]-box.x)*width/box.width+box.x,this.value[i][4]=(this.value[i][4]-box.y)*height/box.height+box.y,"C"==l&&(this.value[i][5]=(this.value[i][5]-box.x)*width/box.width+box.x,this.value[i][6]=(this.value[i][6]-box.y)*height/box.height+box.y)):"A"==l&&(this.value[i][1]=this.value[i][1]*width/box.width,this.value[i][2]=this.value[i][2]*height/box.height,this.value[i][6]=(this.value[i][6]-box.x)*width/box.width+box.x,this.value[i][7]=(this.value[i][7]-box.y)*height/box.height+box.y);return this},equalCommands:function(pathArray){var i,il,equalCommands;for(pathArray=new SVG.PathArray(pathArray),equalCommands=this.value.length===pathArray.value.length,i=0,il=this.value.length;equalCommands&&i<il;i++)equalCommands=this.value[i][0]===pathArray.value[i][0];return equalCommands},morph:function(pathArray){return pathArray=new SVG.PathArray(pathArray),this.equalCommands(pathArray)?this.destination=pathArray:this.destination=null,this},at:function(pos){if(!this.destination)return this;var i,il,j,jl,sourceArray=this.value,destinationArray=this.destination.value,array=[],pathArray=new SVG.PathArray;for(i=0,il=sourceArray.length;i<il;i++){for(array[i]=[sourceArray[i][0]],j=1,jl=sourceArray[i].length;j<jl;j++)array[i][j]=sourceArray[i][j]+(destinationArray[i][j]-sourceArray[i][j])*pos;"A"===array[i][0]&&(array[i][4]=+(0!=array[i][4]),array[i][5]=+(0!=array[i][5]))}return pathArray.value=array,pathArray},parse:function(array){if(array instanceof SVG.PathArray)return array.valueOf();var s,arr,paramCnt={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};array="string"==typeof array?array.replace(SVG.regex.numbersWithDots,pathRegReplace).replace(SVG.regex.pathLetters," $& ").replace(SVG.regex.hyphen,"$1 -").trim().split(SVG.regex.delimiter):array.reduce(function(prev,curr){return[].concat.call(prev,curr)},[]);var arr=[],p=new SVG.Point,p0=new SVG.Point,index=0,len=array.length;do{SVG.regex.isPathLetter.test(array[index])?(s=array[index],++index):"M"==s?s="L":"m"==s&&(s="l"),arr.push(pathHandlers[s].call(null,array.slice(index,index+=paramCnt[s.toUpperCase()]).map(parseFloat),p,p0))}while(len>index);return arr},bbox:function(){return SVG.parser.path.setAttribute("d",this.toString()),SVG.parser.path.getBBox()}}),SVG.Number=SVG.invent({create:function(value,unit){this.value=0,this.unit=unit||"","number"==typeof value?this.value=isNaN(value)?0:isFinite(value)?value:value<0?-3.4e38:3.4e38:"string"==typeof value?(unit=value.match(SVG.regex.numberAndUnit))&&(this.value=parseFloat(unit[1]),"%"==unit[5]?this.value/=100:"s"==unit[5]&&(this.value*=1e3),this.unit=unit[5]):value instanceof SVG.Number&&(this.value=value.valueOf(),this.unit=value.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(number){return number=new SVG.Number(number),new SVG.Number(this+number,this.unit||number.unit)},minus:function(number){return number=new SVG.Number(number),new SVG.Number(this-number,this.unit||number.unit)},times:function(number){return number=new SVG.Number(number),new SVG.Number(this*number,this.unit||number.unit)},divide:function(number){return number=new SVG.Number(number),new SVG.Number(this/number,this.unit||number.unit)},to:function(unit){var number=new SVG.Number(this);return"string"==typeof unit&&(number.unit=unit),number},morph:function(number){return this.destination=new SVG.Number(number),number.relative&&(this.destination.value+=this.value),this},at:function(pos){return this.destination?new SVG.Number(this.destination).minus(this).times(pos).plus(this):this}}}),SVG.Element=SVG.invent({create:function(node){this._stroke=SVG.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=node)&&(this.type=node.nodeName,this.node.instance=this,this._stroke=node.getAttribute("stroke")||this._stroke)},extend:{x:function(x){return this.attr("x",x)},y:function(y){return this.attr("y",y)},cx:function(x){return null==x?this.x()+this.width()/2:this.x(x-this.width()/2)},cy:function(y){return null==y?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(x,y){return this.x(x).y(y)},center:function(x,y){return this.cx(x).cy(y)},width:function(width){return this.attr("width",width)},height:function(height){return this.attr("height",height)},size:function(width,height){var p=proportionalSize(this,width,height);return this.width(new SVG.Number(p.width)).height(new SVG.Number(p.height))},clone:function(parent,withData){this.writeDataToDom();var clone=assignNewId(this.node.cloneNode(!0));return parent?parent.add(clone):this.after(clone),clone},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(element){return this.after(element).remove(),element},addTo:function(parent){return parent.put(this)},putIn:function(parent){return parent.add(this)},id:function(id){return this.attr("id",id)},inside:function(x,y){var box=this.bbox();return x>box.x&&y>box.y&&x<box.x+box.width&&y<box.y+box.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var attr=this.attr("class");return null==attr?[]:attr.trim().split(SVG.regex.delimiter)},hasClass:function(name){return-1!=this.classes().indexOf(name)},addClass:function(name){if(!this.hasClass(name)){var array=this.classes();array.push(name),this.attr("class",array.join(" "))}return this},removeClass:function(name){return this.hasClass(name)&&this.attr("class",this.classes().filter(function(c){return c!=name}).join(" ")),this},toggleClass:function(name){return this.hasClass(name)?this.removeClass(name):this.addClass(name)},reference:function(attr){return SVG.get(this.attr(attr))},parent:function(type){var parent=this;if(!parent.node.parentNode)return null;if(parent=SVG.adopt(parent.node.parentNode),!type)return parent;for(;parent&&parent.node instanceof window.SVGElement;){if("string"==typeof type?parent.matches(type):parent instanceof type)return parent;parent=SVG.adopt(parent.node.parentNode)}},doc:function(){return this instanceof SVG.Doc?this:this.parent(SVG.Doc)},parents:function(type){var parents=[],parent=this;do{if(!(parent=parent.parent(type))||!parent.node)break;parents.push(parent)}while(parent.parent);return parents},matches:function(selector){return matches(this.node,selector)},native:function(){return this.node},svg:function(svg){var well=document.createElement("svg");if(!(svg&&this instanceof SVG.Parent))return well.appendChild(svg=document.createElement("svg")),this.writeDataToDom(),svg.appendChild(this.node.cloneNode(!0)),well.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");well.innerHTML="<svg>"+svg.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var i=0,il=well.firstChild.childNodes.length;i<il;i++)this.node.appendChild(well.firstChild.firstChild);return this},writeDataToDom:function(){if(this.each||this.lines){(this.each?this:this.lines()).each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(o){return this.dom=o,this},is:function(obj){return is(this,obj)}}}),SVG.easing={"-":function(pos){return pos},"<>":function(pos){return-Math.cos(pos*Math.PI)/2+.5},">":function(pos){return Math.sin(pos*Math.PI/2)},"<":function(pos){return 1-Math.cos(pos*Math.PI/2)}},SVG.morph=function(pos){return function(from,to){return new SVG.MorphObj(from,to).at(pos)}},SVG.Situation=SVG.invent({create:function(o){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new SVG.Number(o.duration).valueOf(),this.delay=new SVG.Number(o.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=o.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),SVG.FX=SVG.invent({create:function(element){this._target=element,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(o,ease,delay){"object"==typeof o&&(ease=o.ease,delay=o.delay,o=o.duration);var situation=new SVG.Situation({duration:o||1e3,delay:delay||0,ease:SVG.easing[ease||"-"]||ease});return this.queue(situation),this},delay:function(delay){var situation=new SVG.Situation({duration:delay,delay:0,ease:SVG.easing["-"]});return this.queue(situation)},target:function(target){return target&&target instanceof SVG.Element?(this._target=target,this):this._target},timeToAbsPos:function(timestamp){return(timestamp-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(absPos){return this.situation.duration/this._speed*absPos+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=window.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){window.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(fn){return("function"==typeof fn||fn instanceof SVG.Situation)&&this.situations.push(fn),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof SVG.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var i,source,s=this.situation;if(s.init)return this;for(i in s.animations)source=this.target()[i](),s.animations[i]instanceof SVG.Number&&(source=new SVG.Number(source)),s.animations[i]=source.morph(s.animations[i]);for(i in s.attrs)s.attrs[i]=new SVG.MorphObj(this.target().attr(i),s.attrs[i]);for(i in s.styles)s.styles[i]=new SVG.MorphObj(this.target().style(i),s.styles[i]);return s.initialTransformation=this.target().matrixify(),s.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(jumpToEnd,clearQueue){var active=this.active;return this.active=!1,clearQueue&&this.clearQueue(),jumpToEnd&&this.situation&&(!active&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var temp=this.situation;this.stop(),this.situation=temp,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(pos,isAbsPos){var durDivSpd=this.situation.duration/this._speed;return this.absPos=pos,isAbsPos||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*durDivSpd,this.situation.finish=this.situation.start+durDivSpd,this.step(!0)},speed:function(speed){return 0===speed?this.pause():speed?(this._speed=speed,this.at(this.absPos,!0)):this._speed},loop:function(times,reverse){var c=this.last();return c.loops=null==times||times,c.loop=0,reverse&&(c.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(reversed){var c=this.last();return c.reversed=void 0===reversed?!c.reversed:reversed,this},progress:function(easeIt){return easeIt?this.situation.ease(this.pos):this.pos},after:function(fn){var c=this.last(),wrapper=function wrapper(e){e.detail.situation==c&&(fn.call(this,c),this.off("finished.fx",wrapper))};return this.target().on("finished.fx",wrapper),this._callStart()},during:function(fn){var c=this.last(),wrapper=function(e){e.detail.situation==c&&fn.call(this,e.detail.pos,SVG.morph(e.detail.pos),e.detail.eased,c)};return this.target().off("during.fx",wrapper).on("during.fx",wrapper),this.after(function(){this.off("during.fx",wrapper)}),this._callStart()},afterAll:function(fn){var wrapper=function wrapper(e){fn.call(this),this.off("allfinished.fx",wrapper)};return this.target().off("allfinished.fx",wrapper).on("allfinished.fx",wrapper),this._callStart()},duringAll:function(fn){var wrapper=function(e){fn.call(this,e.detail.pos,SVG.morph(e.detail.pos),e.detail.eased,e.detail.situation)};return this.target().off("during.fx",wrapper).on("during.fx",wrapper),this.afterAll(function(){this.off("during.fx",wrapper)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(method,args,type){return this.last()[type||"animations"][method]=args,this._callStart()},step:function(ignoreTime){if(ignoreTime||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops){var absPos,absPosInt,lastLoop;absPos=Math.max(this.absPos,0),absPosInt=Math.floor(absPos),!0===this.situation.loops||absPosInt<this.situation.loops?(this.pos=absPos-absPosInt,lastLoop=this.situation.loop,this.situation.loop=absPosInt):(this.absPos=this.situation.loops,this.pos=1,lastLoop=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-lastLoop)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var eased=this.situation.ease(this.pos);for(var i in this.situation.once)i>this.lastPos&&i<=eased&&(this.situation.once[i].call(this.target(),this.pos,eased),delete this.situation.once[i]);return this.active&&this.target().fire("during",{pos:this.pos,eased:eased,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.target().off(".fx"),this.active=!1),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=eased,this):this},eachAt:function(){var i,len,at,self=this,target=this.target(),s=this.situation;for(i in s.animations)at=[].concat(s.animations[i]).map(function(el){return"string"!=typeof el&&el.at?el.at(s.ease(self.pos),self.pos):el}),target[i].apply(target,at);for(i in s.attrs)at=[i].concat(s.attrs[i]).map(function(el){return"string"!=typeof el&&el.at?el.at(s.ease(self.pos),self.pos):el}),target.attr.apply(target,at);for(i in s.styles)at=[i].concat(s.styles[i]).map(function(el){return"string"!=typeof el&&el.at?el.at(s.ease(self.pos),self.pos):el}),target.style.apply(target,at);if(s.transforms.length){for(at=s.initialTransformation,i=0,len=s.transforms.length;i<len;i++){var a=s.transforms[i];a instanceof SVG.Matrix?at=a.relative?at.multiply((new SVG.Matrix).morph(a).at(s.ease(this.pos))):at.morph(a).at(s.ease(this.pos)):(a.relative||a.undo(at.extract()),at=at.multiply(a.at(s.ease(this.pos))))}target.matrix(at)}return this},once:function(pos,fn,isEased){return isEased||(pos=this.situation.ease(pos)),this.situation.once[pos]=fn,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:SVG.Element,construct:{animate:function(o,ease,delay){return(this.fx||(this.fx=new SVG.FX(this))).animate(o,ease,delay)},delay:function(delay){return(this.fx||(this.fx=new SVG.FX(this))).delay(delay)},stop:function(jumpToEnd,clearQueue){return this.fx&&this.fx.stop(jumpToEnd,clearQueue),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(speed){if(this.fx){if(null==speed)return this.fx.speed();this.fx.speed(speed)}return this}}}),SVG.MorphObj=SVG.invent({create:function(from,to){return SVG.Color.isColor(to)?new SVG.Color(from).morph(to):SVG.regex.numberAndUnit.test(to)?new SVG.Number(from).morph(to):(this.value=from,void(this.destination=to))},extend:{at:function(pos,real){return real<1?this.value:this.destination},valueOf:function(){return this.value}}}),SVG.extend(SVG.FX,{attr:function(a,v,relative){if("object"==typeof a)for(var key in a)this.attr(key,a[key]);else this.add(a,v,"attrs");return this},style:function(s,v){if("object"==typeof s)for(var key in s)this.style(key,s[key]);else this.add(s,v,"styles");return this},x:function(x,relative){if(this.target()instanceof SVG.G)return this.transform({x:x},relative),this;var num=new SVG.Number(x);return num.relative=relative,this.add("x",num)},y:function(y,relative){if(this.target()instanceof SVG.G)return this.transform({y:y},relative),this;var num=new SVG.Number(y);return num.relative=relative,this.add("y",num)},cx:function(x){return this.add("cx",new SVG.Number(x))},cy:function(y){return this.add("cy",new SVG.Number(y))},move:function(x,y){return this.x(x).y(y)},center:function(x,y){return this.cx(x).cy(y)},size:function(width,height){if(this.target()instanceof SVG.Text)this.attr("font-size",width);else{var box;width&&height||(box=this.target().bbox()),width||(width=box.width/box.height*height),height||(height=box.height/box.width*width),this.add("width",new SVG.Number(width)).add("height",new SVG.Number(height))}return this},plot:function(){return this.add("plot",arguments.length>1?[].slice.call(arguments):arguments[0])},leading:function(value){return this.target().leading?this.add("leading",new SVG.Number(value)):this},viewbox:function(x,y,width,height){return this.target()instanceof SVG.Container&&this.add("viewbox",new SVG.ViewBox(x,y,width,height)),this},update:function(o){if(this.target()instanceof SVG.Stop){if("number"==typeof o||o instanceof SVG.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});null!=o.opacity&&this.attr("stop-opacity",o.opacity),null!=o.color&&this.attr("stop-color",o.color),null!=o.offset&&this.attr("offset",o.offset)}return this}}),SVG.Box=SVG.invent({create:function(x,y,width,height){
if(!("object"!=typeof x||x instanceof SVG.Element))return SVG.Box.call(this,null!=x.left?x.left:x.x,null!=x.top?x.top:x.y,x.width,x.height);4==arguments.length&&(this.x=x,this.y=y,this.width=width,this.height=height),fullBox(this)},extend:{merge:function(box){var b=new this.constructor;return b.x=Math.min(this.x,box.x),b.y=Math.min(this.y,box.y),b.width=Math.max(this.x+this.width,box.x+box.width)-b.x,b.height=Math.max(this.y+this.height,box.y+box.height)-b.y,fullBox(b)},transform:function(m){var bbox,xMin=1/0,xMax=-1/0,yMin=1/0,yMax=-1/0;return[new SVG.Point(this.x,this.y),new SVG.Point(this.x2,this.y),new SVG.Point(this.x,this.y2),new SVG.Point(this.x2,this.y2)].forEach(function(p){p=p.transform(m),xMin=Math.min(xMin,p.x),xMax=Math.max(xMax,p.x),yMin=Math.min(yMin,p.y),yMax=Math.max(yMax,p.y)}),bbox=new this.constructor,bbox.x=xMin,bbox.width=xMax-xMin,bbox.y=yMin,bbox.height=yMax-yMin,fullBox(bbox),bbox}}}),SVG.BBox=SVG.invent({create:function(element){if(SVG.Box.apply(this,[].slice.call(arguments)),element instanceof SVG.Element){var box;try{if(document.documentElement.contains){if(!document.documentElement.contains(element.node))throw new Exception("Element not in the dom")}else{for(var topParent=element.node;topParent.parentNode;)topParent=topParent.parentNode;if(topParent!=document)throw new Exception("Element not in the dom")}box=element.node.getBBox()}catch(e){if(element instanceof SVG.Shape){var clone=element.clone(SVG.parser.draw.instance).show();box=clone.node.getBBox(),clone.remove()}else box={x:element.node.clientLeft,y:element.node.clientTop,width:element.node.clientWidth,height:element.node.clientHeight}}SVG.Box.call(this,box)}},inherit:SVG.Box,parent:SVG.Element,construct:{bbox:function(){return new SVG.BBox(this)}}}),SVG.BBox.prototype.constructor=SVG.BBox,SVG.extend(SVG.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),SVG.RBox=SVG.invent({create:function(element){SVG.Box.apply(this,[].slice.call(arguments)),element instanceof SVG.Element&&SVG.Box.call(this,element.node.getBoundingClientRect())},inherit:SVG.Box,parent:SVG.Element,extend:{addOffset:function(){return this.x+=window.pageXOffset,this.y+=window.pageYOffset,this}},construct:{rbox:function(el){return el?new SVG.RBox(this).transform(el.screenCTM().inverse()):new SVG.RBox(this).addOffset()}}}),SVG.RBox.prototype.constructor=SVG.RBox,SVG.Matrix=SVG.invent({create:function(source){var i,base=arrayToMatrix([1,0,0,1,0,0]);for(source=source instanceof SVG.Element?source.matrixify():"string"==typeof source?arrayToMatrix(source.split(SVG.regex.delimiter).map(parseFloat)):6==arguments.length?arrayToMatrix([].slice.call(arguments)):Array.isArray(source)?arrayToMatrix(source):"object"==typeof source?source:base,i=abcdef.length-1;i>=0;--i)this[abcdef[i]]=source&&"number"==typeof source[abcdef[i]]?source[abcdef[i]]:base[abcdef[i]]},extend:{extract:function(){var px=deltaTransformPoint(this,0,1),py=deltaTransformPoint(this,1,0),skewX=180/Math.PI*Math.atan2(px.y,px.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(skewX*Math.PI/180)+this.f*Math.sin(skewX*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(skewX*Math.PI/180)+this.e*Math.sin(-skewX*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-skewX,skewY:180/Math.PI*Math.atan2(py.y,py.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:skewX,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new SVG.Matrix(this)}},clone:function(){return new SVG.Matrix(this)},morph:function(matrix){return this.destination=new SVG.Matrix(matrix),this},at:function(pos){return this.destination?new SVG.Matrix({a:this.a+(this.destination.a-this.a)*pos,b:this.b+(this.destination.b-this.b)*pos,c:this.c+(this.destination.c-this.c)*pos,d:this.d+(this.destination.d-this.d)*pos,e:this.e+(this.destination.e-this.e)*pos,f:this.f+(this.destination.f-this.f)*pos}):this},multiply:function(matrix){return new SVG.Matrix(this.native().multiply(parseMatrix(matrix).native()))},inverse:function(){return new SVG.Matrix(this.native().inverse())},translate:function(x,y){return new SVG.Matrix(this.native().translate(x||0,y||0))},scale:function(x,y,cx,cy){return 1==arguments.length?y=x:3==arguments.length&&(cy=cx,cx=y,y=x),this.around(cx,cy,new SVG.Matrix(x,0,0,y,0,0))},rotate:function(r,cx,cy){return r=SVG.utils.radians(r),this.around(cx,cy,new SVG.Matrix(Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0))},flip:function(a,o){return"x"==a?this.scale(-1,1,o,0):"y"==a?this.scale(1,-1,0,o):this.scale(-1,-1,a,null!=o?o:a)},skew:function(x,y,cx,cy){return 1==arguments.length?y=x:3==arguments.length&&(cy=cx,cx=y,y=x),x=SVG.utils.radians(x),y=SVG.utils.radians(y),this.around(cx,cy,new SVG.Matrix(1,Math.tan(y),Math.tan(x),1,0,0))},skewX:function(x,cx,cy){return this.skew(x,0,cx,cy)},skewY:function(y,cx,cy){return this.skew(0,y,cx,cy)},around:function(cx,cy,matrix){return this.multiply(new SVG.Matrix(1,0,0,1,cx||0,cy||0)).multiply(matrix).multiply(new SVG.Matrix(1,0,0,1,-cx||0,-cy||0))},native:function(){for(var matrix=SVG.parser.native.createSVGMatrix(),i=abcdef.length-1;i>=0;i--)matrix[abcdef[i]]=this[abcdef[i]];return matrix},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:SVG.Element,construct:{ctm:function(){return new SVG.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof SVG.Nested){var rect=this.rect(1,1),m=rect.node.getScreenCTM();return rect.remove(),new SVG.Matrix(m)}return new SVG.Matrix(this.node.getScreenCTM())}}}),SVG.Point=SVG.invent({create:function(x,y){var source,base={x:0,y:0};source=Array.isArray(x)?{x:x[0],y:x[1]}:"object"==typeof x?{x:x.x,y:x.y}:null!=x?{x:x,y:null!=y?y:x}:base,this.x=source.x,this.y=source.y},extend:{clone:function(){return new SVG.Point(this)},morph:function(x,y){return this.destination=new SVG.Point(x,y),this},at:function(pos){return this.destination?new SVG.Point({x:this.x+(this.destination.x-this.x)*pos,y:this.y+(this.destination.y-this.y)*pos}):this},native:function(){var point=SVG.parser.native.createSVGPoint();return point.x=this.x,point.y=this.y,point},transform:function(matrix){return new SVG.Point(this.native().matrixTransform(matrix.native()))}}}),SVG.extend(SVG.Element,{point:function(x,y){return new SVG.Point(x,y).transform(this.screenCTM().inverse())}}),SVG.extend(SVG.Element,{attr:function(a,v,n){if(null==a){for(a={},v=this.node.attributes,n=v.length-1;n>=0;n--)a[v[n].nodeName]=SVG.regex.isNumber.test(v[n].nodeValue)?parseFloat(v[n].nodeValue):v[n].nodeValue;return a}if("object"==typeof a)for(v in a)this.attr(v,a[v]);else if(null===v)this.node.removeAttribute(a);else{if(null==v)return v=this.node.getAttribute(a),null==v?SVG.defaults.attrs[a]:SVG.regex.isNumber.test(v)?parseFloat(v):v;"stroke-width"==a?this.attr("stroke",parseFloat(v)>0?this._stroke:null):"stroke"==a&&(this._stroke=v),"fill"!=a&&"stroke"!=a||(SVG.regex.isImage.test(v)&&(v=this.doc().defs().image(v,0,0)),v instanceof SVG.Image&&(v=this.doc().defs().pattern(0,0,function(){this.add(v)}))),"number"==typeof v?v=new SVG.Number(v):SVG.Color.isColor(v)?v=new SVG.Color(v):Array.isArray(v)&&(v=new SVG.Array(v)),"leading"==a?this.leading&&this.leading(v):"string"==typeof n?this.node.setAttributeNS(n,a,v.toString()):this.node.setAttribute(a,v.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,v)}return this}}),SVG.extend(SVG.Element,{transform:function(o,relative){var matrix,bbox,target=this;if("object"!=typeof o)return matrix=new SVG.Matrix(target).extract(),"string"==typeof o?matrix[o]:matrix;if(matrix=new SVG.Matrix(target),relative=!!relative||!!o.relative,null!=o.a)matrix=relative?matrix.multiply(new SVG.Matrix(o)):new SVG.Matrix(o);else if(null!=o.rotation)ensureCentre(o,target),matrix=relative?matrix.rotate(o.rotation,o.cx,o.cy):matrix.rotate(o.rotation-matrix.extract().rotation,o.cx,o.cy);else if(null!=o.scale||null!=o.scaleX||null!=o.scaleY){if(ensureCentre(o,target),o.scaleX=null!=o.scale?o.scale:null!=o.scaleX?o.scaleX:1,o.scaleY=null!=o.scale?o.scale:null!=o.scaleY?o.scaleY:1,!relative){var e=matrix.extract();o.scaleX=1*o.scaleX/e.scaleX,o.scaleY=1*o.scaleY/e.scaleY}matrix=matrix.scale(o.scaleX,o.scaleY,o.cx,o.cy)}else if(null!=o.skew||null!=o.skewX||null!=o.skewY){if(ensureCentre(o,target),o.skewX=null!=o.skew?o.skew:null!=o.skewX?o.skewX:0,o.skewY=null!=o.skew?o.skew:null!=o.skewY?o.skewY:0,!relative){var e=matrix.extract();matrix=matrix.multiply((new SVG.Matrix).skew(e.skewX,e.skewY,o.cx,o.cy).inverse())}matrix=matrix.skew(o.skewX,o.skewY,o.cx,o.cy)}else o.flip?("x"==o.flip||"y"==o.flip?o.offset=null==o.offset?target.bbox()["c"+o.flip]:o.offset:null==o.offset?(bbox=target.bbox(),o.flip=bbox.cx,o.offset=bbox.cy):o.flip=o.offset,matrix=(new SVG.Matrix).flip(o.flip,o.offset)):null==o.x&&null==o.y||(relative?matrix=matrix.translate(o.x,o.y):(null!=o.x&&(matrix.e=o.x),null!=o.y&&(matrix.f=o.y)));return this.attr("transform",matrix)}}),SVG.extend(SVG.FX,{transform:function(o,relative){var matrix,bbox,target=this.target();return"object"!=typeof o?(matrix=new SVG.Matrix(target).extract(),"string"==typeof o?matrix[o]:matrix):(relative=!!relative||!!o.relative,null!=o.a?matrix=new SVG.Matrix(o):null!=o.rotation?(ensureCentre(o,target),matrix=new SVG.Rotate(o.rotation,o.cx,o.cy)):null!=o.scale||null!=o.scaleX||null!=o.scaleY?(ensureCentre(o,target),o.scaleX=null!=o.scale?o.scale:null!=o.scaleX?o.scaleX:1,o.scaleY=null!=o.scale?o.scale:null!=o.scaleY?o.scaleY:1,matrix=new SVG.Scale(o.scaleX,o.scaleY,o.cx,o.cy)):null!=o.skewX||null!=o.skewY?(ensureCentre(o,target),o.skewX=null!=o.skewX?o.skewX:0,o.skewY=null!=o.skewY?o.skewY:0,matrix=new SVG.Skew(o.skewX,o.skewY,o.cx,o.cy)):o.flip?("x"==o.flip||"y"==o.flip?o.offset=null==o.offset?target.bbox()["c"+o.flip]:o.offset:null==o.offset?(bbox=target.bbox(),o.flip=bbox.cx,o.offset=bbox.cy):o.flip=o.offset,matrix=(new SVG.Matrix).flip(o.flip,o.offset)):null==o.x&&null==o.y||(matrix=new SVG.Translate(o.x,o.y)),matrix?(matrix.relative=relative,this.last().transforms.push(matrix),this._callStart()):this)}}),SVG.extend(SVG.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(SVG.regex.transforms).slice(0,-1).map(function(str){var kv=str.trim().split("(");return[kv[0],kv[1].split(SVG.regex.delimiter).map(function(str){return parseFloat(str)})]}).reduce(function(matrix,transform){return"matrix"==transform[0]?matrix.multiply(arrayToMatrix(transform[1])):matrix[transform[0]].apply(matrix,transform[1])},new SVG.Matrix)},toParent:function(parent){if(this==parent)return this;var ctm=this.screenCTM(),pCtm=parent.screenCTM().inverse();return this.addTo(parent).untransform().transform(pCtm.multiply(ctm)),this},toDoc:function(){return this.toParent(this.doc())}}),SVG.Transformation=SVG.invent({create:function(source,inversed){if(arguments.length>1&&"boolean"!=typeof inversed)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(source))for(var i=0,len=this.arguments.length;i<len;++i)this[this.arguments[i]]=source[i];else if("object"==typeof source)for(var i=0,len=this.arguments.length;i<len;++i)this[this.arguments[i]]=source[this.arguments[i]];this.inversed=!1,!0===inversed&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(pos){for(var params=[],i=0,len=this.arguments.length;i<len;++i)params.push(this[this.arguments[i]]);var m=this._undo||new SVG.Matrix;return m=(new SVG.Matrix).morph(SVG.Matrix.prototype[this.method].apply(m,params)).at(pos),this.inversed?m.inverse():m},undo:function(o){for(var i=0,len=this.arguments.length;i<len;++i)o[this.arguments[i]]=void 0===this[this.arguments[i]]?0:o[this.arguments[i]];return o.cx=this.cx,o.cy=this.cy,this._undo=new(SVG[capitalize(this.method)])(o,!0).at(1),this}}}),SVG.Translate=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),SVG.Rotate=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(pos){var m=(new SVG.Matrix).rotate((new SVG.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(pos),this.cx,this.cy);return this.inversed?m.inverse():m},undo:function(o){return this._undo=o,this}}}),SVG.Scale=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),SVG.Skew=SVG.invent({parent:SVG.Matrix,inherit:SVG.Transformation,create:function(source,inversed){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),SVG.extend(SVG.Element,{style:function(s,v){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof s)for(v in s)this.style(v,s[v]);else{if(!SVG.regex.isCss.test(s))return this.node.style[camelCase(s)];for(s=s.split(/\s*;\s*/).filter(function(e){return!!e}).map(function(e){return e.split(/\s*:\s*/)});v=s.pop();)this.style(v[0],v[1])}else this.node.style[camelCase(s)]=null===v||SVG.regex.isBlank.test(v)?"":v;return this}}),SVG.Parent=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Element,extend:{children:function(){return SVG.utils.map(SVG.utils.filterSVGElements(this.node.childNodes),function(node){return SVG.adopt(node)})},add:function(element,i){return null==i?this.node.appendChild(element.node):element.node!=this.node.childNodes[i]&&this.node.insertBefore(element.node,this.node.childNodes[i]),this},put:function(element,i){return this.add(element,i),element},has:function(element){return this.index(element)>=0},index:function(element){return[].slice.call(this.node.childNodes).indexOf(element.node)},get:function(i){return SVG.adopt(this.node.childNodes[i])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(block,deep){var i,il,children=this.children();for(i=0,il=children.length;i<il;i++)children[i]instanceof SVG.Element&&block.apply(children[i],[i,children]),deep&&children[i]instanceof SVG.Container&&children[i].each(block,deep);return this},removeElement:function(element){return this.node.removeChild(element.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),SVG.extend(SVG.Parent,{ungroup:function(parent,depth){return 0===depth||this instanceof SVG.Defs||this.node==SVG.parser.draw?this:(parent=parent||(this instanceof SVG.Doc?this:this.parent(SVG.Parent)),depth=depth||1/0,this.each(function(){return this instanceof SVG.Defs?this:this instanceof SVG.Parent?this.ungroup(parent,depth-1):this.toParent(parent)}),this.node.firstChild||this.remove(),this)},flatten:function(parent,depth){return this.ungroup(parent,depth)}}),SVG.Container=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Parent}),SVG.ViewBox=SVG.invent({create:function(source){var x,y,width,height,view,we,he,base=[0,0,0,0],wm=1,hm=1,reg=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(source instanceof SVG.Element){for(we=source,he=source,view=(source.attr("viewBox")||"").match(reg),source.bbox,width=new SVG.Number(source.width()),height=new SVG.Number(source.height());"%"==width.unit;)wm*=width.value,width=new SVG.Number(we instanceof SVG.Doc?we.parent().offsetWidth:we.parent().width()),we=we.parent();for(;"%"==height.unit;)hm*=height.value,height=new SVG.Number(he instanceof SVG.Doc?he.parent().offsetHeight:he.parent().height()),he=he.parent();this.x=0,this.y=0,this.width=width*wm,this.height=height*hm,this.zoom=1,view&&(x=parseFloat(view[0]),y=parseFloat(view[1]),width=parseFloat(view[2]),height=parseFloat(view[3]),this.zoom=this.width/this.height>width/height?this.height/height:this.width/width,this.x=x,this.y=y,this.width=width,this.height=height)}else source="string"==typeof source?source.match(reg).map(function(el){return parseFloat(el)}):Array.isArray(source)?source:"object"==typeof source?[source.x,source.y,source.width,source.height]:4==arguments.length?[].slice.call(arguments):base,this.x=source[0],this.y=source[1],this.width=source[2],this.height=source[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(x,y,width,height){return this.destination=new SVG.ViewBox(x,y,width,height),this},at:function(pos){return this.destination?new SVG.ViewBox([this.x+(this.destination.x-this.x)*pos,this.y+(this.destination.y-this.y)*pos,this.width+(this.destination.width-this.width)*pos,this.height+(this.destination.height-this.height)*pos]):this}},parent:SVG.Container,construct:{viewbox:function(x,y,width,height){return 0==arguments.length?new SVG.ViewBox(this):this.attr("viewBox",new SVG.ViewBox(x,y,width,height))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(event){SVG.Element.prototype[event]=function(f){return SVG.on(this.node,event,f),this}}),SVG.listeners=[],SVG.handlerMap=[],SVG.listenerId=0,SVG.on=function(node,event,listener,binding,options){var l=listener.bind(binding||node.instance||node),index=(SVG.handlerMap.indexOf(node)+1||SVG.handlerMap.push(node))-1,ev=event.split(".")[0],ns=event.split(".")[1]||"*";SVG.listeners[index]=SVG.listeners[index]||{},SVG.listeners[index][ev]=SVG.listeners[index][ev]||{},SVG.listeners[index][ev][ns]=SVG.listeners[index][ev][ns]||{},listener._svgjsListenerId||(listener._svgjsListenerId=++SVG.listenerId),SVG.listeners[index][ev][ns][listener._svgjsListenerId]=l,node.addEventListener(ev,l,options||!1)},SVG.off=function(node,event,listener){var index=SVG.handlerMap.indexOf(node),ev=event&&event.split(".")[0],ns=event&&event.split(".")[1],namespace="";if(-1!=index)if(listener){if("function"==typeof listener&&(listener=listener._svgjsListenerId),!listener)return;SVG.listeners[index][ev]&&SVG.listeners[index][ev][ns||"*"]&&(node.removeEventListener(ev,SVG.listeners[index][ev][ns||"*"][listener],!1),delete SVG.listeners[index][ev][ns||"*"][listener])}else if(ns&&ev){if(SVG.listeners[index][ev]&&SVG.listeners[index][ev][ns]){for(listener in SVG.listeners[index][ev][ns])SVG.off(node,[ev,ns].join("."),listener);delete SVG.listeners[index][ev][ns]}}else if(ns)for(event in SVG.listeners[index])for(namespace in SVG.listeners[index][event])ns===namespace&&SVG.off(node,[event,ns].join("."));else if(ev){if(SVG.listeners[index][ev]){for(namespace in SVG.listeners[index][ev])SVG.off(node,[ev,namespace].join("."));delete SVG.listeners[index][ev]}}else{for(event in SVG.listeners[index])SVG.off(node,event);delete SVG.listeners[index],delete SVG.handlerMap[index]}},SVG.extend(SVG.Element,{on:function(event,listener,binding,options){return SVG.on(this.node,event,listener,binding,options),this},off:function(event,listener){return SVG.off(this.node,event,listener),this},fire:function(event,data){return event instanceof window.Event?this.node.dispatchEvent(event):this.node.dispatchEvent(event=new window.CustomEvent(event,{detail:data,cancelable:!0})),this._event=event,this},event:function(){return this._event}}),SVG.Defs=SVG.invent({create:"defs",inherit:SVG.Container}),SVG.G=SVG.invent({create:"g",inherit:SVG.Container,extend:{x:function(x){return null==x?this.transform("x"):this.transform({x:x-this.x()},!0)},y:function(y){return null==y?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(x){return null==x?this.gbox().cx:this.x(x-this.gbox().width/2)},cy:function(y){return null==y?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var bbox=this.bbox(),trans=this.transform();return bbox.x+=trans.x,bbox.x2+=trans.x,bbox.cx+=trans.x,bbox.y+=trans.y,bbox.y2+=trans.y,bbox.cy+=trans.y,bbox}},construct:{group:function(){return this.put(new SVG.G)}}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var i=this.position()+1,p=this.parent();return p.removeElement(this).add(this,i),p instanceof SVG.Doc&&p.node.appendChild(p.defs().node),this},backward:function(){var i=this.position();return i>0&&this.parent().removeElement(this).add(this,i-1),this},front:function(){var p=this.parent();return p.node.appendChild(this.node),p instanceof SVG.Doc&&p.node.appendChild(p.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(element){element.remove();var i=this.position();return this.parent().add(element,i),this},after:function(element){element.remove();var i=this.position();return this.parent().add(element,i+1),this}}),SVG.Mask=SVG.invent({create:function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var i=this.targets.length-1;i>=0;i--)this.targets[i]&&this.targets[i].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new SVG.Mask)}}}),SVG.extend(SVG.Element,{maskWith:function(element){return this.masker=element instanceof SVG.Mask?element:this.parent().mask().add(element),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.ClipPath=SVG.invent({create:function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},inherit:SVG.Container,extend:{remove:function(){for(var i=this.targets.length-1;i>=0;i--)this.targets[i]&&this.targets[i].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new SVG.ClipPath)}}}),SVG.extend(SVG.Element,{clipWith:function(element){return this.clipper=element instanceof SVG.ClipPath?element:this.parent().clip().add(element),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.Gradient=SVG.invent({create:function(type){this.constructor.call(this,SVG.create(type+"Gradient")),this.type=type},inherit:SVG.Container,extend:{at:function(offset,color,opacity){return this.put(new SVG.Stop).update(offset,color,opacity)},update:function(block){return this.clear(),"function"==typeof block&&block.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(a,b,c){return"transform"==a&&(a="gradientTransform"),SVG.Container.prototype.attr.call(this,a,b,c)}},construct:{gradient:function(type,block){return this.defs().gradient(type,block)}}}),SVG.extend(SVG.Gradient,SVG.FX,{from:function(x,y){return"radial"==(this._target||this).type?this.attr({fx:new SVG.Number(x),fy:new SVG.Number(y)}):this.attr({x1:new SVG.Number(x),y1:new SVG.Number(y)})},to:function(x,y){return"radial"==(this._target||this).type?this.attr({cx:new SVG.Number(x),cy:new SVG.Number(y)}):this.attr({x2:new SVG.Number(x),y2:new SVG.Number(y)})}}),SVG.extend(SVG.Defs,{gradient:function(type,block){return this.put(new SVG.Gradient(type)).update(block)}}),SVG.Stop=SVG.invent({create:"stop",inherit:SVG.Element,extend:{update:function(o){return("number"==typeof o||o instanceof SVG.Number)&&(o={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=o.opacity&&this.attr("stop-opacity",o.opacity),null!=o.color&&this.attr("stop-color",o.color),null!=o.offset&&this.attr("offset",new SVG.Number(o.offset)),this}}}),SVG.Pattern=SVG.invent({create:"pattern",inherit:SVG.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(block){return this.clear(),"function"==typeof block&&block.call(this,this),this},toString:function(){return this.fill()},attr:function(a,b,c){return"transform"==a&&(a="patternTransform"),SVG.Container.prototype.attr.call(this,a,b,c)}},construct:{pattern:function(width,height,block){return this.defs().pattern(width,height,block)}}}),SVG.extend(SVG.Defs,{pattern:function(width,height,block){return this.put(new SVG.Pattern).update(block).attr({x:0,y:0,width:width,height:height,patternUnits:"userSpaceOnUse"})}}),SVG.Doc=SVG.invent({create:function(element){element&&(element="string"==typeof element?document.getElementById(element):element,"svg"==element.nodeName?this.constructor.call(this,element):(this.constructor.call(this,SVG.create("svg")),element.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:SVG.Container,extend:{namespace:function(){return this.attr({xmlns:SVG.ns,version:"1.1"}).attr("xmlns:xlink",SVG.xlink,SVG.xmlns).attr("xmlns:svgjs",SVG.svgjs,SVG.xmlns)},defs:function(){if(!this._defs){var defs;(defs=this.node.getElementsByTagName("defs")[0])?this._defs=SVG.adopt(defs):this._defs=new SVG.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(spof){var pos=this.node.getScreenCTM();return pos&&this.style("left",-pos.e%1+"px").style("top",-pos.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,SVG.parser.draw.parentNode||this.node.appendChild(SVG.parser.draw),this}}}),SVG.Shape=SVG.invent({create:function(element){this.constructor.call(this,element)},inherit:SVG.Element}),SVG.Bare=SVG.invent({create:function(element,inherit){if(this.constructor.call(this,SVG.create(element)),inherit)for(var method in inherit.prototype)"function"==typeof inherit.prototype[method]&&(this[method]=inherit.prototype[method])},inherit:SVG.Element,extend:{words:function(text){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(document.createTextNode(text)),this}}}),SVG.extend(SVG.Parent,{element:function(element,inherit){return this.put(new SVG.Bare(element,inherit))}}),SVG.Symbol=SVG.invent({create:"symbol",inherit:SVG.Container,construct:{symbol:function(){return this.put(new SVG.Symbol)}}}),SVG.Use=SVG.invent({create:"use",inherit:SVG.Shape,extend:{element:function(element,file){return this.attr("href",(file||"")+"#"+element,SVG.xlink)}},construct:{use:function(element,file){return this.put(new SVG.Use).element(element,file)}}}),SVG.Rect=SVG.invent({create:"rect",inherit:SVG.Shape,construct:{rect:function(width,height){return this.put(new SVG.Rect).size(width,height)}}}),SVG.Circle=SVG.invent({create:"circle",inherit:SVG.Shape,construct:{circle:function(size){return this.put(new SVG.Circle).rx(new SVG.Number(size).divide(2)).move(0,0)}}}),SVG.extend(SVG.Circle,SVG.FX,{rx:function(rx){return this.attr("r",rx)},ry:function(ry){return this.rx(ry)}}),SVG.Ellipse=SVG.invent({create:"ellipse",inherit:SVG.Shape,construct:{ellipse:function(width,height){return this.put(new SVG.Ellipse).size(width,height).move(0,0)}}}),SVG.extend(SVG.Ellipse,SVG.Rect,SVG.FX,{rx:function(rx){return this.attr("rx",rx)},ry:function(ry){return this.attr("ry",ry)}}),SVG.extend(SVG.Circle,SVG.Ellipse,{x:function(x){return null==x?this.cx()-this.rx():this.cx(x+this.rx())},y:function(y){return null==y?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(x){return null==x?this.attr("cx"):this.attr("cx",x)},cy:function(y){return null==y?this.attr("cy"):this.attr("cy",y)},width:function(width){return null==width?2*this.rx():this.rx(new SVG.Number(width).divide(2))},height:function(height){return null==height?2*this.ry():this.ry(new SVG.Number(height).divide(2))},size:function(width,height){var p=proportionalSize(this,width,height);return this.rx(new SVG.Number(p.width).divide(2)).ry(new SVG.Number(p.height).divide(2))}}),SVG.Line=SVG.invent({create:"line",inherit:SVG.Shape,extend:{array:function(){return new SVG.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(x1,y1,x2,y2){return null==x1?this.array():(x1=void 0!==y1?{x1:x1,y1:y1,x2:x2,y2:y2}:new SVG.PointArray(x1).toLine(),this.attr(x1))},move:function(x,y){return this.attr(this.array().move(x,y).toLine())},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr(this.array().size(p.width,p.height).toLine())}},construct:{line:function(x1,y1,x2,y2){return SVG.Line.prototype.plot.apply(this.put(new SVG.Line),null!=x1?[x1,y1,x2,y2]:[0,0,0,0])}}}),SVG.Polyline=SVG.invent({create:"polyline",inherit:SVG.Shape,construct:{polyline:function(p){return this.put(new SVG.Polyline).plot(p||new SVG.PointArray)}}}),SVG.Polygon=SVG.invent({create:"polygon",inherit:SVG.Shape,construct:{polygon:function(p){return this.put(new SVG.Polygon).plot(p||new SVG.PointArray)}}}),SVG.extend(SVG.Polyline,SVG.Polygon,{array:function(){return this._array||(this._array=new SVG.PointArray(this.attr("points")))},plot:function(p){return null==p?this.array():this.clear().attr("points","string"==typeof p?p:this._array=new SVG.PointArray(p))},clear:function(){return delete this._array,this},move:function(x,y){return this.attr("points",this.array().move(x,y))},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr("points",this.array().size(p.width,p.height))}}),SVG.extend(SVG.Line,SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,x:function(x){return null==x?this.bbox().x:this.move(x,this.bbox().y)},y:function(y){return null==y?this.bbox().y:this.move(this.bbox().x,y)},width:function(width){var b=this.bbox();return null==width?b.width:this.size(width,b.height)},height:function(height){var b=this.bbox();return null==height?b.height:this.size(b.width,height)}}),SVG.Path=SVG.invent({create:"path",inherit:SVG.Shape,extend:{morphArray:SVG.PathArray,array:function(){return this._array||(this._array=new SVG.PathArray(this.attr("d")))},plot:function(d){return null==d?this.array():this.clear().attr("d","string"==typeof d?d:this._array=new SVG.PathArray(d))},clear:function(){return delete this._array,this},move:function(x,y){return this.attr("d",this.array().move(x,y))},x:function(x){return null==x?this.bbox().x:this.move(x,this.bbox().y)},y:function(y){return null==y?this.bbox().y:this.move(this.bbox().x,y)},size:function(width,height){var p=proportionalSize(this,width,height);return this.attr("d",this.array().size(p.width,p.height))},width:function(width){return null==width?this.bbox().width:this.size(width,this.bbox().height)},height:function(height){return null==height?this.bbox().height:this.size(this.bbox().width,height)}},construct:{path:function(d){return this.put(new SVG.Path).plot(d||new SVG.PathArray)}}}),SVG.Image=SVG.invent({create:"image",inherit:SVG.Shape,extend:{load:function(url){if(!url)return this;var self=this,img=new window.Image;return SVG.on(img,"load",function(){var p=self.parent(SVG.Pattern);null!==p&&(0==self.width()&&0==self.height()&&self.size(img.width,img.height),p&&0==p.width()&&0==p.height()&&p.size(self.width(),self.height()),"function"==typeof self._loaded&&self._loaded.call(self,{width:img.width,height:img.height,ratio:img.width/img.height,url:url}))}),SVG.on(img,"error",function(e){"function"==typeof self._error&&self._error.call(self,e)}),this.attr("href",img.src=this.src=url,SVG.xlink)},loaded:function(loaded){return this._loaded=loaded,this},error:function(error){return this._error=error,this}},construct:{image:function(source,width,height){
return this.put(new SVG.Image).load(source).size(width||0,height||width||0)}}}),SVG.Text=SVG.invent({create:function(){this.constructor.call(this,SVG.create("text")),this.dom.leading=new SVG.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",SVG.defaults.attrs["font-family"])},inherit:SVG.Shape,extend:{x:function(x){return null==x?this.attr("x"):this.attr("x",x)},y:function(y){var oy=this.attr("y"),o="number"==typeof oy?oy-this.bbox().y:0;return null==y?"number"==typeof oy?oy-o:oy:this.attr("y","number"==typeof y?y+o:y)},cx:function(x){return null==x?this.bbox().cx:this.x(x-this.bbox().width/2)},cy:function(y){return null==y?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(text){if(void 0===text){for(var text="",children=this.node.childNodes,i=0,len=children.length;i<len;++i)0!=i&&3!=children[i].nodeType&&1==SVG.adopt(children[i]).dom.newLined&&(text+="\n"),text+=children[i].textContent;return text}if(this.clear().build(!0),"function"==typeof text)text.call(this,this);else{text=text.split("\n");for(var i=0,il=text.length;i<il;i++)this.tspan(text[i]).newLine()}return this.build(!1).rebuild()},size:function(size){return this.attr("font-size",size).rebuild()},leading:function(value){return null==value?this.dom.leading:(this.dom.leading=new SVG.Number(value),this.rebuild())},lines:function(){var node=(this.textPath&&this.textPath()||this).node,lines=SVG.utils.map(SVG.utils.filterSVGElements(node.childNodes),function(el){return SVG.adopt(el)});return new SVG.Set(lines)},rebuild:function(rebuild){if("boolean"==typeof rebuild&&(this._rebuild=rebuild),this._rebuild){var self=this,blankLineOffset=0,dy=this.dom.leading*new SVG.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(self.textPath()||this.attr("x",self.attr("x")),"\n"==this.text()?blankLineOffset+=dy:(this.attr("dy",dy+blankLineOffset),blankLineOffset=0))}),this.fire("rebuild")}return this},build:function(build){return this._build=!!build,this},setData:function(o){return this.dom=o,this.dom.leading=new SVG.Number(o.leading||1.3),this}},construct:{text:function(text){return this.put(new SVG.Text).text(text)},plain:function(text){return this.put(new SVG.Text).plain(text)}}}),SVG.Tspan=SVG.invent({create:"tspan",inherit:SVG.Shape,extend:{text:function(text){return null==text?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof text?text.call(this,this):this.plain(text),this)},dx:function(dx){return this.attr("dx",dx)},dy:function(dy){return this.attr("dy",dy)},newLine:function(){var t=this.parent(SVG.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),SVG.extend(SVG.Text,SVG.Tspan,{plain:function(text){return!1===this._build&&this.clear(),this.node.appendChild(document.createTextNode(text)),this},tspan:function(text){var node=(this.textPath&&this.textPath()||this).node,tspan=new SVG.Tspan;return!1===this._build&&this.clear(),node.appendChild(tspan.node),tspan.text(text)},clear:function(){for(var node=(this.textPath&&this.textPath()||this).node;node.hasChildNodes();)node.removeChild(node.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),SVG.TextPath=SVG.invent({create:"textPath",inherit:SVG.Parent,parent:SVG.Text,construct:{path:function(d){for(var path=new SVG.TextPath,track=this.doc().defs().path(d);this.node.hasChildNodes();)path.node.appendChild(this.node.firstChild);return this.node.appendChild(path.node),path.attr("href","#"+track,SVG.xlink),this},array:function(){var track=this.track();return track?track.array():null},plot:function(d){var track=this.track(),pathArray=null;return track&&(pathArray=track.plot(d)),null==d?pathArray:this},track:function(){var path=this.textPath();if(path)return path.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return SVG.adopt(this.node.firstChild)}}}),SVG.Nested=SVG.invent({create:function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},inherit:SVG.Container,construct:{nested:function(){return this.put(new SVG.Nested)}}}),SVG.A=SVG.invent({create:"a",inherit:SVG.Container,extend:{to:function(url){return this.attr("href",url,SVG.xlink)},show:function(target){return this.attr("show",target,SVG.xlink)},target:function(target){return this.attr("target",target)}},construct:{link:function(url){return this.put(new SVG.A).to(url)}}}),SVG.extend(SVG.Element,{linkTo:function(url){var link=new SVG.A;return"function"==typeof url?url.call(link,link):link.to(url),this.parent().put(link).put(this)}}),SVG.Marker=SVG.invent({create:"marker",inherit:SVG.Container,extend:{width:function(width){return this.attr("markerWidth",width)},height:function(height){return this.attr("markerHeight",height)},ref:function(x,y){return this.attr("refX",x).attr("refY",y)},update:function(block){return this.clear(),"function"==typeof block&&block.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(width,height,block){return this.defs().marker(width,height,block)}}}),SVG.extend(SVG.Defs,{marker:function(width,height,block){return this.put(new SVG.Marker).size(width,height).ref(width/2,height/2).viewbox(0,0,width,height).attr("orient","auto").update(block)}}),SVG.extend(SVG.Line,SVG.Polyline,SVG.Polygon,SVG.Path,{marker:function(marker,width,height,block){var attr=["marker"];return"all"!=marker&&attr.push(marker),attr=attr.join("-"),marker=arguments[1]instanceof SVG.Marker?arguments[1]:this.doc().marker(width,height,block),this.attr(attr,marker)}});var sugar={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,a){return"color"==a?t:t+"-"+a}};["fill","stroke"].forEach(function(m){var i,extension={};extension[m]=function(o){if(void 0===o)return this;if("string"==typeof o||SVG.Color.isRgb(o)||o&&"function"==typeof o.fill)this.attr(m,o);else for(i=sugar[m].length-1;i>=0;i--)null!=o[sugar[m][i]]&&this.attr(sugar.prefix(m,sugar[m][i]),o[sugar[m][i]]);return this},SVG.extend(SVG.Element,SVG.FX,extension)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(d,cx,cy){return this.transform({rotation:d,cx:cx,cy:cy})},skew:function(x,y,cx,cy){return 1==arguments.length||3==arguments.length?this.transform({skew:x,cx:y,cy:cx}):this.transform({skewX:x,skewY:y,cx:cx,cy:cy})},scale:function(x,y,cx,cy){return 1==arguments.length||3==arguments.length?this.transform({scale:x,cx:y,cy:cx}):this.transform({scaleX:x,scaleY:y,cx:cx,cy:cy})},translate:function(x,y){return this.transform({x:x,y:y})},flip:function(a,o){return o="number"==typeof a?a:o,this.transform({flip:a||"both",offset:o})},matrix:function(m){return this.attr("transform",new SVG.Matrix(6==arguments.length?[].slice.call(arguments):m))},opacity:function(value){return this.attr("opacity",value)},dx:function(x){return this.x(new SVG.Number(x).plus(this instanceof SVG.FX?0:this.x()),!0)},dy:function(y){return this.y(new SVG.Number(y).plus(this instanceof SVG.FX?0:this.y()),!0)},dmove:function(x,y){return this.dx(x).dy(y)}}),SVG.extend(SVG.Rect,SVG.Ellipse,SVG.Circle,SVG.Gradient,SVG.FX,{radius:function(x,y){var type=(this._target||this).type;return"radial"==type||"circle"==type?this.attr("r",new SVG.Number(x)):this.rx(x).ry(null==y?x:y)}}),SVG.extend(SVG.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(length){return this.node.getPointAtLength(length)}}),SVG.extend(SVG.Parent,SVG.Text,SVG.Tspan,SVG.FX,{font:function(a,v){if("object"==typeof a)for(v in a)this.font(v,a[v]);return"leading"==a?this.leading(v):"anchor"==a?this.attr("text-anchor",v):"size"==a||"family"==a||"weight"==a||"stretch"==a||"variant"==a||"style"==a?this.attr("font-"+a,v):this.attr(a,v)}}),SVG.Set=SVG.invent({create:function(members){Array.isArray(members)?this.members=members:this.clear()},extend:{add:function(){var i,il,elements=[].slice.call(arguments);for(i=0,il=elements.length;i<il;i++)this.members.push(elements[i]);return this},remove:function(element){var i=this.index(element);return i>-1&&this.members.splice(i,1),this},each:function(block){for(var i=0,il=this.members.length;i<il;i++)block.apply(this.members[i],[i,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(element){return this.index(element)>=0},index:function(element){return this.members.indexOf(element)},get:function(i){return this.members[i]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new SVG.RBox;var rbox=this.members[0].rbox(this.members[0].doc());return this.each(function(){rbox=rbox.merge(this.rbox(this.doc()))}),rbox}},construct:{set:function(members){return new SVG.Set(members)}}}),SVG.FX.Set=SVG.invent({create:function(set){this.set=set}}),SVG.Set.inherit=function(){var m,methods=[];for(var m in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[m]&&"function"!=typeof SVG.Set.prototype[m]&&methods.push(m);methods.forEach(function(method){SVG.Set.prototype[method]=function(){for(var i=0,il=this.members.length;i<il;i++)this.members[i]&&"function"==typeof this.members[i][method]&&this.members[i][method].apply(this.members[i],arguments);return"animate"==method?this.fx||(this.fx=new SVG.FX.Set(this)):this}}),methods=[];for(var m in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[m]&&"function"!=typeof SVG.FX.Set.prototype[m]&&methods.push(m);methods.forEach(function(method){SVG.FX.Set.prototype[method]=function(){for(var i=0,il=this.set.members.length;i<il;i++)this.set.members[i].fx[method].apply(this.set.members[i].fx,arguments);return this}})},SVG.extend(SVG.Element,{data:function(a,v,r){if("object"==typeof a)for(v in a)this.data(v,a[v]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(e){return this.attr("data-"+a)}else this.attr("data-"+a,null===v?null:!0===r||"string"==typeof v||"number"==typeof v?v:JSON.stringify(v));return this}}),SVG.extend(SVG.Element,{remember:function(k,v){if("object"==typeof arguments[0])for(var v in k)this.remember(v,k[v]);else{if(1==arguments.length)return this.memory()[k];this.memory()[k]=v}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var i=arguments.length-1;i>=0;i--)delete this.memory()[arguments[i]];return this},memory:function(){return this._memory||(this._memory={})}}),SVG.get=function(id){var node=document.getElementById(idFromReference(id)||id);return SVG.adopt(node)},SVG.select=function(query,parent){return new SVG.Set(SVG.utils.map((parent||document).querySelectorAll(query),function(node){return SVG.adopt(node)}))},SVG.extend(SVG.Parent,{select:function(query){return SVG.select(query,this.node)}});var abcdef="abcdef".split("");if("function"!=typeof window.CustomEvent){var CustomEvent=function(event,options){options=options||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(event,options.bubbles,options.cancelable,options.detail),e};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}return function(w){for(var lastTime=0,vendors=["moz","webkit"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)w.requestAnimationFrame=w[vendors[x]+"RequestAnimationFrame"],w.cancelAnimationFrame=w[vendors[x]+"CancelAnimationFrame"]||w[vendors[x]+"CancelRequestAnimationFrame"];w.requestAnimationFrame=w.requestAnimationFrame||function(callback){var currTime=(new Date).getTime(),timeToCall=Math.max(0,16-(currTime-lastTime)),id=w.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);return lastTime=currTime+timeToCall,id},w.cancelAnimationFrame=w.cancelAnimationFrame||w.clearTimeout}(window),SVG})},{}],2:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),dataURLtoBlob=function(dataURL,type){for(var binary=atob(dataURL.split(",")[1]),length=binary.length,binaryArray=new Uint8Array(length),i=0;i<length;i++)binaryArray[i]=binary.charCodeAt(i);return new Blob([binaryArray],{type:type})},_class=function(){function _class(){_classCallCheck(this,_class),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.anchor=document.createElement("a")}return _createClass(_class,[{key:"resize",value:function(width,height){this.canvas.width=width,this.canvas.height=height,this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}},{key:"createImage",value:function(width,height){this.resize(width,height);var dataURL=this.canvas.toDataURL("image/png");this.blobURL&&URL.revokeObjectURL(this.blobURL);var blob=dataURLtoBlob(dataURL,"image/png");this.blobURL=URL.createObjectURL(blob)}},{key:"download",value:function(){this.blobURL||this.createImage(),this.anchor.href=this.blobURL,this.anchor.download="solid_wallpaper.png",this.anchor.target="_blank";var ev=document.createEvent("MouseEvents");ev.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,this.anchor),this.anchor.dispatchEvent(ev)}}]),_class}();exports.default=_class},{}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _wireframe=require("./wireframe.js"),_wireframe2=_interopRequireDefault(_wireframe),_imagemaker=require("./imagemaker.js"),_imagemaker2=_interopRequireDefault(_imagemaker);window.addEventListener("load",function(){var screenWidth=screen.width||window.parent.screen.width,screenHeight=screen.height||window.parent.screen.height,btn=document.querySelector("#download"),container=document.querySelector("#wireframe"),wireframe=new _wireframe2.default(container,screenWidth,screenHeight),imageMaker=new _imagemaker2.default;wireframe.resize().then(function(){imageMaker.createImage(screenWidth,screenHeight),btn.disabled=!1,btn.addEventListener("click",function(){imageMaker.download()})})},!1)},{"./imagemaker.js":2,"./wireframe.js":4}],4:[function(require,module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_svg=require("svg.js"),_svg2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_svg),_class=function(){function _class(container,screenWidth,screenHeight){_classCallCheck(this,_class),this.fgColor="#ddd",this.svg=(0,_svg2.default)(container),this.rect=this.svg.rect(),this.screenWidth=screenWidth,this.screenHeight=screenHeight,this.text={width:this.svg.text("Width"),height:this.svg.text("Height")},this.path={width:this.svg.path(),height:this.svg.path()},this.rect.attr({fill:"transparent",stroke:this.fgColor,"stroke-width":1});for(var key in this.text)this.text[key].attr({fill:this.fgColor}),this.text[key].font({family:"Menlo",size:11});for(var _key in this.path)this.path[_key].attr({fill:"transparent",stroke:this.fgColor,"stroke-width":.5})}return _createClass(_class,[{key:"resize",value:function(){var _this=this,width=this.svg.node.clientWidth,height=this.svg.node.clientHeight,rectSize=.6*Math.min(width,height);return this.rect.size(rectSize,rectSize),this.rect.center(.5*width,.5*height),this.plotPath(0),new Promise(function(resolve,reject){_this.animate().then(function(){resolve()})})}},{key:"plotPath",value:function(pos){var bbox=this.rect.bbox(),dw=.2*bbox.width,dh=.2*bbox.height;this.path.width.plot("M "+bbox.x+","+bbox.y+" C"+bbox.x+","+(bbox.y-dw)+" "+bbox.x2+","+(bbox.y-dw)+" "+bbox.x2+","+bbox.y),this.path.height.plot("M "+bbox.x+","+bbox.y+" C"+(bbox.x-dh)+","+bbox.y+" "+(bbox.x-dh)+","+bbox.y2+" "+bbox.x+","+bbox.y2),this.text.width.center(bbox.cx,bbox.y-.75*dw),this.text.height.center(bbox.x-.75*dh,bbox.cy),pos>0&&(this.text.width.text(Math.floor(this.screenWidth*pos)+"px"),this.text.height.text(Math.floor(this.screenHeight*pos)+"px"))}},{key:"animate",value:function(){var _this2=this,area=this.rect.width()*this.rect.height(),scale=Math.sqrt(area/(this.screenWidth*this.screenHeight)),svgWidth=this.svg.node.clientWidth,svgHeight=this.svg.node.clientHeight;return new Promise(function(resolve,reject){_this2.rect.animate(2e3,"<>",1e3).size(_this2.screenWidth*scale,_this2.screenHeight*scale).center(.5*svgWidth,.5*svgHeight).during(function(pos){_this2.plotPath(pos)}).after(function(){resolve()})})}}]),_class}();exports.default=_class},{"svg.js":1}]},{},[3]);
